--- a/src/video/kmsdrm/SDL_kmsdrmcolordef.h
+++ b/src/video/kmsdrm/SDL_kmsdrmcolordef.h
@@ -16,18 +16,8 @@
     float h_factor;
 } drm_color_def;
 
-/* Must be kept up-to-date with SDL_kmsdrmcolordef.c */
-extern drm_color_def KMSDRM_COLOR_C8;
-extern drm_color_def KMSDRM_COLOR_XRGB88888;
-extern drm_color_def KMSDRM_COLOR_RGB565;
-extern drm_color_def KMSDRM_COLOR_XRGB15555;
-extern drm_color_def KMSDRM_COLOR_XBGR88888;
-extern drm_color_def KMSDRM_COLOR_BGR565;
-extern drm_color_def KMSDRM_COLOR_XBGR15555;
-extern drm_color_def KMSDRM_COLOR_YUYV;
-
 /* Provides information on how to configure color format. */
-drm_color_def *get_drm_color_def(int depth, Uint32 flags);
+const drm_color_def *get_drm_color_def(int depth, Uint32 flags);
 /* Provides necessary arguments for drm framebuffer creation */
 void get_framebuffer_args(const drm_color_def *def, unsigned int handle, unsigned int pitch,
     Uint16 height, Uint32 *handles, Uint32 *pitches, Uint32 *offsets);

--- a/src/video/kmsdrm/SDL_kmsdrmcolordef.c
+++ b/src/video/kmsdrm/SDL_kmsdrmcolordef.c
@@ -4,12 +4,13 @@
 #include "SDL_kmsdrmcolordef.h"
 
 #define MAKE_RGBA(type, bpp, rbits, gbits, bbits, abits, rsh, gsh, bsh, ash) \
-    drm_color_def KMSDRM_COLOR_##type = { \
+    static const drm_color_def KMSDRM_COLOR_##type = { \
         DRM_FORMAT_##type, bpp, \
-        (0xFF >> (8-rbits)) << rsh, (0xFF >> (8-gbits)) << gsh, \
-        (0xFF >> (8-bbits)) << bsh, (0xFF >> (8-abits)) << ash, \
+        (0x3FF >> (10-rbits)) << rsh, (0x3FF >> (10-gbits)) << gsh, \
+        (0x3FF >> (10-bbits)) << bsh, (0x3FF >> (10-abits)) << ash, \
         rbits, gbits, bbits, abits, rsh, gsh, bsh, ash, 1 \
     }
+
 
 /* Must be kept up-to-date with SDL_kmsdrmcolordef.h */
 /*       |   CODE |BPP| R| G| B| A| RS| GS| BS| AS| */
@@ -30,7 +31,7 @@
  * have in this macro. 
  **/
 #define MAKE_YUV(type, bpp, hf) \
-    drm_color_def KMSDRM_COLOR_##type = { \
+    static const drm_color_def KMSDRM_COLOR_##type = { \
        DRM_FORMAT_##type, bpp, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, hf \
     };
 
@@ -38,7 +39,7 @@
 MAKE_YUV(YUV444, 8, 3);
 
 /* Provides information on how to configure color format. */
-drm_color_def *get_drm_color_def(int depth, Uint32 flags)
+const drm_color_def *get_drm_color_def(int depth, Uint32 flags)
 {
     if (flags & SDL_YUV444) {
         switch(depth) {
--- a/src/video/kmsdrm/SDL_kmsdrmvideo.c
+++ b/src/video/kmsdrm/SDL_kmsdrmvideo.c
@@ -805,6 +805,7 @@
 	}
 
 	KMSDRM_ExitInput(this);
+	close(drm_fd);
 }
 
 static SDL_VideoDevice *KMSDRM_CreateDevice(int devindex)

